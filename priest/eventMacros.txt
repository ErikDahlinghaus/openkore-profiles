!include tu_eventMacros.txt

automacro TeleMVP {
    MobNearDist /(Gopinich|Mysteltainn)/ <20
    timeout 1
    call {
        do tele
    }
}

automacro hide {
    SimpleHookEvent packet_attack
    StatusInactiveHandle EFST_HIDING
    timeout 5
    disabled 1
    call {
        do p nameIDForActor($.SimpleHookEventLastTargetID)
        #if ( nameIDForActor($.SimpleHookEventLastTargetID) eq myID() && playersCount() > 0) {
        #    do ss TF_HIDING
        #}
    }
}

automacro unhide {
    StatusActiveHandle EFST_HIDING
    delay 1
    call {
        do ss TF_HIDING
    }
}

automacro respawn {
    PartyMsg /respawn/
    call {
        do tele 2
    }
}

sub nameIDForActor {
    my $sourceID = shift;
    return Actor::get($sourceID)->{nameID}
}

sub myID {
    return $char->{nameID};
}

sub playersCount {
    return scalar(@$playersList);
}

sub monstersCount {
    return scalar(@$monstersList);
}

sub aggressivesCount {
    my $aggressivesCount = ai_getAggressives();
    return $aggressivesCount;
}